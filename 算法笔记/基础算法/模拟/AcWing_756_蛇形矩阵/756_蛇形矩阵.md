### 题目描述

![](https://raw.githubusercontent.com/xcchxss/myAlgorithm/refs/heads/main/python_files/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%8B%9F/AcWing_756_%E8%9B%87%E5%BD%A2%E7%9F%A9%E9%98%B5/756_%E8%9B%87%E5%BD%A2%E7%9F%A9%E9%98%B5.bmp)

### 方法技巧

##### 模拟法

1. 可以将需要生成的蛇形矩阵看成在坐标系上运动
2. 起点为 (0, 0)，初始值为 1，按照右下左上的顺序运动，每次值加一
3. 创建列表 ans[]，用以记录运动经过点的值
4. 创建列表 flag[]，用以记录所有点的状态，确保不重复经过某点

##### 偏移量法

1. 基本思路

   - 用两个偏移量列表 dx[]、dy[] 控制运动方向

   - 偏移量列表的下标，对应了不同的运动方向

     （1）这道题是四个方向，可以有多个方向

   - 偏移量列表的值，决定了运动方向的顺序（先下再左或是先左再上）、

   - 运动初始方向为右（i = 0），在遇到边界或已访问的元素时转到下一方向

2. 思路图示

   ![](https://raw.githubusercontent.com/xcchxss/myAlgorithm/refs/heads/main/python_files/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%8B%9F/AcWing_756_%E8%9B%87%E5%BD%A2%E7%9F%A9%E9%98%B5/%E5%81%8F%E7%A7%BB%E9%87%8F%E7%9F%A9%E9%98%B5%E7%A4%BA%E6%84%8F%E5%9B%BE.bmp)

3. 算法模板

   - 定义偏移量数组

     （1）行偏移 (dx[])、列偏移(dy[])，每一个值对应一个方向

     （2）例如：对于右 -> 下 -> 左 -> 上 -> 右，dx = [0, 1, 0, -1]、dy = [1, 0, -1, 0]

   - 初始化遍历状态

     （1）设置起始点（通常为 (0, 0)）和初始方向（通常偏移量数组下标为 0）

   - 遍历

     （1）使用循环进行遍历，将旧坐标与偏移量相加得到新坐标，判断新坐标状况

     （2）判断新坐标是否超出边界、是否已访问

     - 若新坐标无效：改变方向（i），移动到下一个方向得到新坐标（一定有效） 
     - 若新坐标有效：更新 x、y 坐标（也即移动到下一个位置，继续遍历）

### 详细代码

```python
n, m = map(int, input().split())
# 读入要求矩阵的行与列

ans = [[0 for i in range(m)] for j in range(n)]
# 蛇形矩阵 ans（注意先列（m）后行（n））
# 初始值默认为 0

dx = [0, 1, 0, -1]
dy = [1, 0, -1, 0]
# 偏移量矩阵 dx 与 dy
# 对应着四个不同的方向：右 -> 下 -> 左 -> 上 -> 右

num = 1
x = y = 0
i = 0
# num：蛇形矩阵 ans 中的所有数字
# x y：初始坐标
# i：移动方向，初始移动方向为向右，所以 i = 0

while num <= n * m:
# 矩阵填满之后退出

    ans[x][y] = num
    num = num + 1
    # 填入矩阵，数字加一

    a = x + dx[i]
    b = y + dy[i]
    # a b 为 x y 沿 i 方向移动后得到的新坐标

    if a < 0 or a >= n or b < 0 or b >= m or ans[a][b]:
        i = (i + 1) % 4
        a = x + dx[i]
        b = y + dy[i]
    # 判断新坐标是否合理（超出边界、填过数字）
    # 新坐标无效 -> 换下一个方向再次移动
    # 此时得到的新坐标 a b 一定合理
    # 唯一不合理的情况也即矩阵填满了，会随即退出循环

    x = a
    y = b
    # 更新 x y 坐标
    # 判断是否填满，没填满再去填入数字

for i in range(n):
    for j in range(m):
        print(ans[i][j], end = " ")
    print()
# 循环打印蛇形矩阵
```